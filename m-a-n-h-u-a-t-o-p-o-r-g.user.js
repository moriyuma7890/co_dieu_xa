// ==UserScript==
// @name         m-a-n-h-u-a-t-o-p-o-r-g
// @namespace    https://github.com/moriyuma7890/co_dieu_xa/raw/main/m-a-n-h-u-a-t-o-p-o-r-g.user.js
// @version      2024.09.02
// @description  down m-a-n-h-u-a-t-o-p-o-r-g
// @author       You
// @match        https://manhuatop.org/*/*/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=manhuatop.org
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.48/dist/zip.min.js
// @grant        none
// @downloadURL  https://github.com/moriyuma7890/co_dieu_xa/raw/main/m-a-n-h-u-a-t-o-p-o-r-g.user.js
// @updateURL    https://github.com/moriyuma7890/co_dieu_xa/raw/main/m-a-n-h-u-a-t-o-p-o-r-g.meta.js
// ==/UserScript==

(function(_0x4cb472,_0x54f12d){const _0x1ef74a=a0_0x2bbc,_0x4a0ef9=_0x4cb472();while(!![]){try{const _0x42c35a=-parseInt(_0x1ef74a(0x1bf))/0x1+-parseInt(_0x1ef74a(0x1c7))/0x2*(parseInt(_0x1ef74a(0x184))/0x3)+parseInt(_0x1ef74a(0x19d))/0x4*(-parseInt(_0x1ef74a(0x1a4))/0x5)+-parseInt(_0x1ef74a(0x198))/0x6*(parseInt(_0x1ef74a(0x1c3))/0x7)+-parseInt(_0x1ef74a(0x1ca))/0x8+-parseInt(_0x1ef74a(0x187))/0x9+-parseInt(_0x1ef74a(0x1b7))/0xa*(-parseInt(_0x1ef74a(0x1a1))/0xb);if(_0x42c35a===_0x54f12d)break;else _0x4a0ef9['push'](_0x4a0ef9['shift']());}catch(_0x5e7ad2){_0x4a0ef9['push'](_0x4a0ef9['shift']());}}}(a0_0x2e28,0xb11ad));function a0_0x2e28(){const _0x1c0569=['position','963829yLMzTr','89504e47','image/webp','alignItems','14NjaWFw','rel','flex','none','26998lKUvzB','image/png','absolute','7880992aPkQyM','0.5rem','click','zIndex','arrayBuffer','center','map','style','revokeObjectURL','top','#chapter-heading','src','body','54WuFdQA','transform','href','12205755eQOjff','https://fonts.googleapis.com/css2?family=Acme&display=swap','name','push','setAttribute','display','application/zip','innerHTML','getElementsByTagName','.jpg','gap','download','\x20/\x20','status-num','BlobWriter','URL','.webp','1561452REUKBe','link','ZipWriter','head','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','176VGLlFi','image/jpeg','all','50vw','1808807fBwMjb','img','pointer','34490fqVbot','.reading-content','width','relative','.status-num','remove','className','querySelector','textContent','getUint32','toString','createElement','stylesheet','BlobReader','length','appendChild','trim','#heartbeat','.content-area','310OcUiyo','add','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','close','cursor','replace','createObjectURL'];a0_0x2e28=function(){return _0x1c0569;};return a0_0x2e28();}let downloading_current=0x0,downloading_total=0x0,image_blobs;function sleep(_0x15af11){return new Promise(_0x3b8c59=>setTimeout(_0x3b8c59,_0x15af11));}function a0_0x2bbc(_0x53c277,_0x411179){const _0x2e28ec=a0_0x2e28();return a0_0x2bbc=function(_0x2bbcda,_0x58e4de){_0x2bbcda=_0x2bbcda-0x182;let _0x3d08de=_0x2e28ec[_0x2bbcda];return _0x3d08de;},a0_0x2bbc(_0x53c277,_0x411179);}const download_not_encrypted=async(_0x25eb7f,_0x5edf1d)=>{const _0x4faa82=a0_0x2bbc,_0x280670=await fetch(_0x25eb7f),_0x3b7764=await _0x280670[_0x4faa82(0x1ce)]();let _0x1c9ccb=(''+(_0x5edf1d+0x1))['padStart'](0x3,'0');const _0x2dd829=new DataView(_0x3b7764),_0x9343cd=_0x2dd829[_0x4faa82(0x1ad)](0x0,![])[_0x4faa82(0x1ae)](0x10);if(_0x9343cd==='52494646'){const _0x287b4=new Blob([_0x3b7764],{'type':_0x4faa82(0x1c1)});image_blobs['push']({'name':_0x1c9ccb+_0x4faa82(0x197),'blob':_0x287b4}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0x9343cd===_0x4faa82(0x1c0)){const _0x3bc9b4=new Blob([_0x3b7764],{'type':_0x4faa82(0x1c8)});image_blobs[_0x4faa82(0x18a)]({'name':_0x1c9ccb+'.png','blob':_0x3bc9b4}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0xd804bb=new Blob([_0x3b7764],{'type':_0x4faa82(0x19e)});image_blobs['push']({'name':_0x1c9ccb+_0x4faa82(0x190),'blob':_0xd804bb}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}};function update_status(){const _0x335c40=a0_0x2bbc;document['querySelector']('.status-num')[_0x335c40(0x1d1)]['display']=_0x335c40(0x1c5),document['querySelector']('.status-num')[_0x335c40(0x1d1)][_0x335c40(0x1c2)]=_0x335c40(0x1cf),document[_0x335c40(0x1ab)](_0x335c40(0x1a8))[_0x335c40(0x18e)]=downloading_current+'\x20/\x20'+downloading_total;}function create_status_box(){const _0x12e9e8=a0_0x2bbc;let _0x1ab3c4=document[_0x12e9e8(0x1af)]('div');return _0x1ab3c4[_0x12e9e8(0x1aa)]=_0x12e9e8(0x194),_0x1ab3c4[_0x12e9e8(0x1ac)]=downloading_current+_0x12e9e8(0x193)+downloading_total,_0x1ab3c4;}function create_download_icon(){const _0x5c0a13=a0_0x2bbc;let _0x3549e8=document[_0x5c0a13(0x1af)]('div'),_0x3da0bb=document['createElement'](_0x5c0a13(0x1a2));_0x3da0bb[_0x5c0a13(0x1aa)]='tai-ve',_0x3da0bb['setAttribute'](_0x5c0a13(0x182),_0x5c0a13(0x19c)),_0x3da0bb[_0x5c0a13(0x1d1)][_0x5c0a13(0x1a6)]='3rem',_0x3da0bb[_0x5c0a13(0x1d1)][_0x5c0a13(0x1bb)]=_0x5c0a13(0x1a3),_0x3549e8['appendChild'](_0x3da0bb);let _0x1e122f=document[_0x5c0a13(0x1af)](_0x5c0a13(0x199));_0x1e122f[_0x5c0a13(0x1c4)]=_0x5c0a13(0x1b0),_0x1e122f[_0x5c0a13(0x186)]=_0x5c0a13(0x188),document[_0x5c0a13(0x18f)](_0x5c0a13(0x19b))[0x0][_0x5c0a13(0x1b3)](_0x1e122f);let _0x125ae9=document[_0x5c0a13(0x1af)]('div');_0x125ae9[_0x5c0a13(0x1aa)]='status',_0x125ae9[_0x5c0a13(0x1d1)][_0x5c0a13(0x18c)]=_0x5c0a13(0x1c5),_0x125ae9['style']['justifyContent']='center',_0x125ae9['style']['alignItems']='center',_0x125ae9[_0x5c0a13(0x1d1)][_0x5c0a13(0x191)]='1.5rem',_0x125ae9[_0x5c0a13(0x1d1)]['position']=_0x5c0a13(0x1c9),_0x125ae9[_0x5c0a13(0x1d1)][_0x5c0a13(0x1cd)]='10000',_0x125ae9[_0x5c0a13(0x1d1)][_0x5c0a13(0x1d3)]=_0x5c0a13(0x1cb),_0x125ae9[_0x5c0a13(0x1d1)]['left']=_0x5c0a13(0x1a0),_0x125ae9['style'][_0x5c0a13(0x185)]='translate(-50%)';let _0x396b98=create_status_box();const _0x590211=document[_0x5c0a13(0x1af)](_0x5c0a13(0x1d1));_0x590211[_0x5c0a13(0x1ac)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x204rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',document[_0x5c0a13(0x19b)][_0x5c0a13(0x1b3)](_0x590211),_0x125ae9[_0x5c0a13(0x1b3)](_0x3549e8),_0x125ae9[_0x5c0a13(0x1b3)](_0x396b98);let _0x188e58=document[_0x5c0a13(0x1ab)](_0x5c0a13(0x1b6));_0x188e58['style'][_0x5c0a13(0x1be)]=_0x5c0a13(0x1a7);let _0x1a7059=_0x188e58['firstChild'];return _0x188e58['insertBefore'](_0x125ae9,_0x1a7059),_0x125ae9;}const throttlePromises=async(_0x233620,_0x5ad780)=>{const _0x5e0ad4=a0_0x2bbc;while(_0x233620[_0x5e0ad4(0x1b2)]>0x0){await Promise[_0x5e0ad4(0x19f)](_0x233620['splice'](0x0,_0x5ad780)[_0x5e0ad4(0x1d0)](_0x29c0bc=>_0x29c0bc())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x33ce40=a0_0x2bbc;let _0x38039b=document[_0x33ce40(0x1ab)](_0x33ce40(0x1b5));!_0x38039b&&(_0x38039b=document[_0x33ce40(0x1af)](_0x33ce40(0x1d1)),_0x38039b[_0x33ce40(0x18b)]('id','heartbeat'),document[_0x33ce40(0x19b)][_0x33ce40(0x1b3)](_0x38039b)),_0x38039b[_0x33ce40(0x1ac)]=_0x33ce40(0x1b9);},off_heartbeat_css=()=>{const _0x370141=a0_0x2bbc,_0x29cef4=document[_0x370141(0x1ab)]('#heartbeat');_0x29cef4[_0x370141(0x1ac)]='';};function saveBlob(_0x5cf164,_0x3f00ab){const _0x17e132=a0_0x2bbc,_0x474c19=window['URL'][_0x17e132(0x1bd)](_0x5cf164),_0x1b0e3e=document[_0x17e132(0x1af)]('a');_0x1b0e3e[_0x17e132(0x186)]=_0x474c19,_0x1b0e3e[_0x17e132(0x192)]=_0x3f00ab,_0x1b0e3e['style'][_0x17e132(0x18c)]=_0x17e132(0x1c6),document[_0x17e132(0x183)][_0x17e132(0x1b3)](_0x1b0e3e),_0x1b0e3e[_0x17e132(0x1cc)](),_0x1b0e3e[_0x17e132(0x1a9)](),window[_0x17e132(0x196)][_0x17e132(0x1d2)](_0x474c19),image_blobs=null;}((async()=>{const _0x4733f0=a0_0x2bbc,_0x564630=[...document[_0x4733f0(0x1ab)](_0x4733f0(0x1a5))['querySelectorAll'](_0x4733f0(0x1a2))][_0x4733f0(0x1d0)](_0x380bba=>_0x380bba['dataset'][_0x4733f0(0x182)]);let _0x21d80f=document[_0x4733f0(0x1ab)](_0x4733f0(0x1d4))[_0x4733f0(0x1ac)][_0x4733f0(0x1b4)]()[_0x4733f0(0x1bc)]('.','');if(_0x564630[_0x4733f0(0x1b2)]>0x0){downloading_total=_0x564630[_0x4733f0(0x1b2)];const _0x2da8af=create_download_icon();_0x2da8af['addEventListener']('click',async()=>{const _0x58dfe0=_0x4733f0;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];let _0x3d2457;_0x3d2457=_0x564630[_0x58dfe0(0x1d0)]((_0x1c70c1,_0x351288)=>()=>download_not_encrypted(_0x1c70c1,_0x351288)),await throttlePromises(_0x3d2457,0x4);const _0x836b77=new zip[(_0x58dfe0(0x195))](_0x58dfe0(0x18d)),_0x5a55c0=new zip[(_0x58dfe0(0x19a))](_0x836b77);image_blobs['forEach'](async _0x6cf48=>{const _0x5f1f98=_0x58dfe0;await _0x5a55c0[_0x5f1f98(0x1b8)](_0x6cf48[_0x5f1f98(0x189)],new zip[(_0x5f1f98(0x1b1))](_0x6cf48['blob']));});const _0x5a6166=await _0x5a55c0[_0x58dfe0(0x1ba)]();saveBlob(_0x5a6166,_0x21d80f+'.zip');});}})());