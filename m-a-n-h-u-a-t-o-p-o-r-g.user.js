// ==UserScript==
// @name         m-a-n-h-u-a-t-o-p-o-r-g
// @namespace    https://github.com/moriyuma7890/co_dieu_xa/raw/main/m-a-n-h-u-a-t-o-p-o-r-g.user.js
// @version      2024.09.02.1
// @description  down m-a-n-h-u-a-t-o-p-o-r-g
// @author       You
// @match        https://manhuatop.org/*/*/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=manhuatop.org
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.48/dist/zip.min.js
// @grant        none
// @downloadURL  https://github.com/moriyuma7890/co_dieu_xa/raw/main/m-a-n-h-u-a-t-o-p-o-r-g.user.js
// @updateURL    https://github.com/moriyuma7890/co_dieu_xa/raw/main/m-a-n-h-u-a-t-o-p-o-r-g.meta.js
// ==/UserScript==

(function(_0x4cf620,_0x4630dc){const _0x36bd4a=a0_0x4157,_0x3f1d42=_0x4cf620();while(!![]){try{const _0x571933=-parseInt(_0x36bd4a(0xe4))/0x1+parseInt(_0x36bd4a(0xd7))/0x2*(-parseInt(_0x36bd4a(0x116))/0x3)+parseInt(_0x36bd4a(0x107))/0x4+parseInt(_0x36bd4a(0xf0))/0x5*(parseInt(_0x36bd4a(0x10a))/0x6)+parseInt(_0x36bd4a(0x117))/0x7+parseInt(_0x36bd4a(0x112))/0x8*(parseInt(_0x36bd4a(0xf6))/0x9)+-parseInt(_0x36bd4a(0x10b))/0xa;if(_0x571933===_0x4630dc)break;else _0x3f1d42['push'](_0x3f1d42['shift']());}catch(_0x4527b7){_0x3f1d42['push'](_0x3f1d42['shift']());}}}(a0_0xe633,0x3c9b1));let downloading_current=0x0,downloading_total=0x0,image_blobs;function sleep(_0xaa59){return new Promise(_0x20e66c=>setTimeout(_0x20e66c,_0xaa59));}const download_not_encrypted=async(_0x28224b,_0x2d4d2d)=>{const _0x35e109=a0_0x4157,_0x37326d=await fetch(_0x28224b),_0x34acdb=await _0x37326d['arrayBuffer']();let _0x1be4a1=(''+(_0x2d4d2d+0x1))[_0x35e109(0xd0)](0x3,'0');const _0x3ce6c7=new DataView(_0x34acdb),_0xe97d03=_0x3ce6c7['getUint32'](0x0,![])['toString'](0x10);if(_0xe97d03==='52494646'){const _0x5413a0=new Blob([_0x34acdb],{'type':_0x35e109(0x105)});image_blobs[_0x35e109(0xc9)]({'name':_0x1be4a1+_0x35e109(0x10e),'blob':_0x5413a0}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{if(_0xe97d03===_0x35e109(0xed)){const _0x131fb0=new Blob([_0x34acdb],{'type':_0x35e109(0xd4)});image_blobs[_0x35e109(0xc9)]({'name':_0x1be4a1+_0x35e109(0x111),'blob':_0x131fb0}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}else{const _0x34a68e=new Blob([_0x34acdb],{'type':_0x35e109(0xf2)});image_blobs[_0x35e109(0xc9)]({'name':_0x1be4a1+'.jpg','blob':_0x34a68e}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();}}};function update_status(){const _0x206e67=a0_0x4157;document['querySelector'](_0x206e67(0xcb))[_0x206e67(0xe2)][_0x206e67(0x118)]='flex',document[_0x206e67(0xe5)](_0x206e67(0xcb))[_0x206e67(0xe2)]['alignItems']='center',document[_0x206e67(0xe5)](_0x206e67(0xcb))[_0x206e67(0x10f)]=downloading_current+_0x206e67(0xec)+downloading_total;}function create_status_box(){const _0x50e18c=a0_0x4157;let _0x386164=document[_0x50e18c(0x100)]('div');return _0x386164['className']=_0x50e18c(0xf4),_0x386164[_0x50e18c(0xd5)]=downloading_current+_0x50e18c(0xec)+downloading_total,_0x386164;}function create_download_icon(){const _0x43a640=a0_0x4157;let _0x1c2154=document[_0x43a640(0x100)](_0x43a640(0x11b)),_0x30bf16=document['createElement'](_0x43a640(0xcf));_0x30bf16[_0x43a640(0xd3)]=_0x43a640(0xeb),_0x30bf16[_0x43a640(0xef)](_0x43a640(0xfc),'https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png'),_0x30bf16[_0x43a640(0xe2)][_0x43a640(0xd2)]=_0x43a640(0xf8),_0x30bf16['style'][_0x43a640(0xf1)]='pointer',_0x1c2154[_0x43a640(0xd1)](_0x30bf16);let _0x2ce57d=document[_0x43a640(0x100)](_0x43a640(0xcd));_0x2ce57d[_0x43a640(0xe8)]=_0x43a640(0xe6),_0x2ce57d[_0x43a640(0x114)]=_0x43a640(0x103),document[_0x43a640(0x11f)](_0x43a640(0x10d))[0x0][_0x43a640(0xd1)](_0x2ce57d);let _0x5dd985=document[_0x43a640(0x100)](_0x43a640(0x11b));_0x5dd985[_0x43a640(0xd3)]=_0x43a640(0xe7),_0x5dd985[_0x43a640(0xe2)][_0x43a640(0x118)]='flex',_0x5dd985[_0x43a640(0xe2)][_0x43a640(0xfe)]=_0x43a640(0x119),_0x5dd985[_0x43a640(0xe2)][_0x43a640(0xf5)]=_0x43a640(0x119),_0x5dd985[_0x43a640(0xe2)]['gap']=_0x43a640(0x11a),_0x5dd985[_0x43a640(0xe2)]['position']=_0x43a640(0xdd),_0x5dd985['style'][_0x43a640(0xf7)]=_0x43a640(0x113),_0x5dd985['style'][_0x43a640(0xcc)]=_0x43a640(0xca),_0x5dd985[_0x43a640(0xe2)][_0x43a640(0xe1)]=_0x43a640(0xda),_0x5dd985[_0x43a640(0xe2)][_0x43a640(0xdb)]='translate(-50%)';let _0x5d3c70=create_status_box();const _0xe2626d=document[_0x43a640(0x100)](_0x43a640(0xe2));_0xe2626d[_0x43a640(0xd5)]=_0x43a640(0xd9),document['head']['appendChild'](_0xe2626d),_0x5dd985['appendChild'](_0x1c2154),_0x5dd985[_0x43a640(0xd1)](_0x5d3c70);let _0x1e027c=document[_0x43a640(0xe5)](_0x43a640(0xdc));_0x1e027c[_0x43a640(0xe2)][_0x43a640(0x104)]=_0x43a640(0x120);let _0x2d1a3b=_0x1e027c['firstChild'];return _0x1e027c[_0x43a640(0x110)](_0x5dd985,_0x2d1a3b),_0x5dd985;}const throttlePromises=async(_0xb459ef,_0x536654)=>{const _0x24fb15=a0_0x4157;while(_0xb459ef[_0x24fb15(0xfa)]>0x0){await Promise[_0x24fb15(0xc8)](_0xb459ef['splice'](0x0,_0x536654)[_0x24fb15(0x101)](_0x19d409=>_0x19d409())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x460ce8=a0_0x4157;let _0x59005f=document[_0x460ce8(0xe5)]('#heartbeat');!_0x59005f&&(_0x59005f=document[_0x460ce8(0x100)]('style'),_0x59005f[_0x460ce8(0xef)]('id',_0x460ce8(0xf9)),document['head'][_0x460ce8(0xd1)](_0x59005f)),_0x59005f['textContent']=_0x460ce8(0xd6);},off_heartbeat_css=()=>{const _0x1fb60a=a0_0x4157,_0x56cf13=document[_0x1fb60a(0xe5)](_0x1fb60a(0xe9));_0x56cf13[_0x1fb60a(0xd5)]='';};function a0_0xe633(){const _0x4ec728=['cursor','image/jpeg','click','status-num','alignItems','390834xRlASj','zIndex','3rem','heartbeat','length','dataset','src','replace','justifyContent','querySelectorAll','createElement','map','download','https://fonts.googleapis.com/css2?family=Acme&display=swap','position','image/webp','addEventListener','649516wKgNJT','remove','BlobWriter','752838IyehUF','236720MFXPmB','body','head','.webp','innerHTML','insertBefore','.png','8lcaGau','10000','href','URL','463218pYmNyC','1147195FHyyuF','display','center','1.5rem','div','forEach','#chapter-heading','filter','getElementsByTagName','relative','all','push','0.5rem','.status-num','top','link','ZipWriter','img','padStart','appendChild','width','className','image/png','textContent','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','2kLnKoc','none','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x204rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','50vw','transform','.content-area','absolute','BlobReader','createObjectURL','add','left','style','revokeObjectURL','194317TLxskm','querySelector','stylesheet','status','rel','#heartbeat','name','tai-ve','\x20/\x20','89504e47','.zip','setAttribute','10KgiJls'];a0_0xe633=function(){return _0x4ec728;};return a0_0xe633();}function a0_0x4157(_0xa053b9,_0x6e7eff){const _0xe63324=a0_0xe633();return a0_0x4157=function(_0x4157bd,_0x256861){_0x4157bd=_0x4157bd-0xc8;let _0x11e1a9=_0xe63324[_0x4157bd];return _0x11e1a9;},a0_0x4157(_0xa053b9,_0x6e7eff);}function saveBlob(_0x25abfd,_0x3dd62b){const _0xa7d793=a0_0x4157,_0x594e05=window['URL'][_0xa7d793(0xdf)](_0x25abfd),_0x35c21b=document[_0xa7d793(0x100)]('a');_0x35c21b[_0xa7d793(0x114)]=_0x594e05,_0x35c21b[_0xa7d793(0x102)]=_0x3dd62b,_0x35c21b[_0xa7d793(0xe2)][_0xa7d793(0x118)]=_0xa7d793(0xd8),document[_0xa7d793(0x10c)]['appendChild'](_0x35c21b),_0x35c21b[_0xa7d793(0xf3)](),_0x35c21b[_0xa7d793(0x108)](),window[_0xa7d793(0x115)][_0xa7d793(0xe3)](_0x594e05),image_blobs=null;}((async()=>{const _0xede42b=a0_0x4157,_0x13debc=[...document[_0xede42b(0xe5)]('.reading-content')[_0xede42b(0xff)](_0xede42b(0xcf))]['map'](_0x4adaf5=>_0x4adaf5[_0xede42b(0xfb)][_0xede42b(0xfc)])[_0xede42b(0x11e)](_0x3ec3e7=>_0x3ec3e7);let _0x15bb6a=document[_0xede42b(0xe5)](_0xede42b(0x11d))[_0xede42b(0xd5)]['trim']()[_0xede42b(0xfd)]('.','');if(_0x13debc[_0xede42b(0xfa)]>0x0){downloading_total=_0x13debc[_0xede42b(0xfa)];const _0x16adc9=create_download_icon();_0x16adc9[_0xede42b(0x106)]('click',async()=>{const _0x1b8b3e=_0xede42b;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];let _0x2afd8f;_0x2afd8f=_0x13debc[_0x1b8b3e(0x101)]((_0x17cbb0,_0x40b66d)=>()=>download_not_encrypted(_0x17cbb0,_0x40b66d)),await throttlePromises(_0x2afd8f,0x4);const _0x9cea0e=new zip[(_0x1b8b3e(0x109))]('application/zip'),_0x21be6a=new zip[(_0x1b8b3e(0xce))](_0x9cea0e);image_blobs[_0x1b8b3e(0x11c)](async _0x38eb5c=>{const _0x389508=_0x1b8b3e;await _0x21be6a[_0x389508(0xe0)](_0x38eb5c[_0x389508(0xea)],new zip[(_0x389508(0xde))](_0x38eb5c['blob']));});const _0x5138d4=await _0x21be6a['close']();saveBlob(_0x5138d4,_0x15bb6a+_0x1b8b3e(0xee));});}})());